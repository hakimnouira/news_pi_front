<div class="wrap">
  <!-- Header -->
  <header class="header">
    <div class="title-section">
      <h1>ğŸ¤– News Summarizer AI</h1>
      <p class="subtitle">Powered by CompassNet /p>
    </div>
    
    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-box">
        <input 
          type="text" 
          [value]="searchQuery()"
          (input)="onSearchChange($any($event.target).value)"
          (keyup.enter)="performSearch()"
          placeholder="ğŸ” Search articles (e.g., technology, climate, politics...)">
        <button (click)="performSearch()">Search</button>
      </div>
    </div>
    
    <!-- Filter Tabs -->
    <div class="filter-tabs">
      <button 
        (click)="filterByMethod('hybrid')" 
        [class.active]="currentMethod() === 'hybrid'">
        ğŸ† Hybrid Summaries (Recommended)
      </button>
      <button 
        (click)="filterByMethod('llama_full')" 
        [class.active]="currentMethod() === 'llama_full'">
        ğŸ¤– LLaMA Full Summaries
      </button>
      <button 
        (click)="filterByMethod('all')" 
        [class.active]="currentMethod() === 'all'">
        ğŸ“Š All Summaries
      </button>
    </div>
    
    <!-- Navigation -->
    <div class="nav-links">
      <a routerLink="/">ğŸ  Home</a>
      <a routerLink="/summarizer/dashboard">ğŸ“Š Dashboard</a>
    </div>
  </header>
  
  <!-- Loading Spinner -->
  <div *ngIf="loading()" class="loading">
    <div class="spinner"></div>
    <p>Loading articles...</p>
  </div>
  
  <!-- Error Message -->
  <div *ngIf="error()" class="error-message">
    {{ error() }}
  </div>
  
  <!-- Articles Grid -->
  <div *ngIf="!loading() && summaries().length > 0" class="articles-grid">
    <div *ngFor="let summary of summaries(); trackBy: trackBySummaryId" 
         class="article-card"
         (click)="viewArticle(summary.article_id)">
      
      <!-- Method Badge -->
      <span class="method-badge-card"
            [ngClass]="{
              'hybrid': summary.method === 'hybrid',
              'llama': summary.method === 'llama_full'
            }">
        {{ summary.method === 'hybrid' ? 'ğŸ† HYBRID' : 'ğŸ¤– LLAMA' }}
      </span>
      
      <!-- Image -->
      <div class="image-container">
        <img *ngIf="summary.image_url" 
             [src]="summary.image_url" 
             [alt]="summary.title">
        <div *ngIf="!summary.image_url" class="no-image">ğŸ“°</div>
      </div>
      
      <!-- Content -->
      <div class="card-content">
        <h2 class="card-title">{{ summary.title }}</h2>
        <p class="card-summary">{{ truncateText(summary.summary, 250) }}</p>
        
        <!-- Meta -->
        <div class="card-meta">
          <div class="meta-badges">
            <span class="source-badge">{{ summary.source_name }}</span>
            <span *ngIf="summary.method === 'hybrid'" class="source-badge best">
              ğŸ† Best
            </span>
          </div>
          <span class="date-badge">ğŸ“… {{ summary.date_published }}</span>
        </div>
        
        <!-- Links -->
        <div class="card-links">
          <a [routerLink]="['/summarizer/article', summary.article_id]" 
             (click)="$event.stopPropagation()">
            ğŸ“– Read full article â†’
          </a>
          
          <a *ngIf="summary.source_url" 
             [href]="summary.source_url" 
             target="_blank"
             class="external"
             (click)="$event.stopPropagation()">
            ğŸ”— Original article
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- No Articles Message -->
  <div *ngIf="!loading() && summaries().length === 0" class="no-articles">
    <div class="icon">ğŸ¤–</div>
    <h2>{{ searchQuery() ? 'No results for "' + searchQuery() + '"' : 'No articles available' }}</h2>
    <p>{{ searchQuery() ? 'Try different keywords' : 'The bot is collecting articles...' }}</p>
  </div>
</div>